<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notas - Colegio Provincial Dr. Ernesto Guevara</title>
    <link rel="stylesheet" href="/CSS/css_notas_72.css">
</head>
<body style="background-image: url('/Imagenes/fondo.PNG');">

    <header>
        <div class="logo">
            <a href="inicio_carga">
                <img src="/Imagenes/guevara.png" alt="Logo Colegio">
            </a>
        </div>
        <div class="header-text">
            <h2>Colegio Provincial Dr. Ernesto Guevara</h2>
            <p>Notas de los Alumnos</p>
        </div>
        <div class="perfil" onclick="toggleMenu(event)">
            <img src="/Imagenes/perfil.png" alt="Foto de Perfil">
            <div class="dropdown" id="dropdown-menu">
                <ul>
                    <li><a href="perfil">Perfil</a></li>
                    <li><a href="#" onclick="logout()">Cerrar sesión</a></li>
                </ul>
            </div>
        </div>
    </header>

    <div class="notas">
        <h1 style="text-align: center;">7 2</h1>
        <form>
            <!-- Select de la persona -->
            <label for="alumno-select">Alumno:</label>
            <select id="alumno-select">
                <option value="alan-peralta">Alan Peralta</option>
                <option value="ramiro-aquino">Ramiro Aquino</option>
                <option value="axel-armella">Axel Armella</option>
                <option value="joaquin-orona">Joaquín Orona</option>
                <option value="ivan-godoy">Iván Godoy</option>
                <option value="ivan-godoy">Lautaro Santana</option>
                <option value="ivan-godoy">Nadia Cabañas</option>
                <option value="ivan-godoy">Yamila Gimenez</option>
                <option value="ivan-godoy">Luz Ferreyra</option>
                <option value="ivan-godoy">Mariana Barnes</option>
                <option value="ivan-godoy">Franco Tedesco</option>
                <option value="ivan-godoy">Gio Pauletto</option>
                <option value="ivan-godoy">Lautaro Escobar</option>
                <option value="ivan-godoy">Genesis Miranda</option>
                <option value="ivan-godoy">Tamara Alvarez</option>
            </select>

            <!-- Select de la materia -->
            <label for="materia-select">Materia:</label>
            <select id="materia-select" class="materia-select">
                <option value="programacion">Programación</option>
                <option value="matematica">Matemática</option>
                <option value="marco-juridico">Marco Jurídico</option>
                <option value="ingles-tecnico">Inglés Técnico</option>
                <option value="hardware">Hardware</option>
                <option value="practicas-profesionalizantes">Prácticas Profesionalizantes</option>
                <option value="taller-vocacional">Taller Vocacional</option>
                <option value="arduino-3">Arduino 3</option>
                <option value="redes">Redes</option>
                <option value="autogestion">Autogestión</option>
                <option value="asistencia">Asistencia</option>
            </select>

            <!-- Input de la nota -->
            <label for="nota-input">Nota:</label>
            <input type="number" id="nota-input" min="0" max="10" placeholder="Nota" required>

            <!-- Select de tipo de nota -->
            <label for="tipo-nota">Tipo de Nota:</label>
            <select id="tipo-nota">
                <option value="1c_1np">1er Cuatrimestre - 1ra Nota Parcial</option>
                <option value="1c_2np">1er Cuatrimestre - 2da Nota Parcial</option>
                <option value="1c_nota">1er Cuatrimestre - Nota</option>
                <option value="2c_1np">2do Cuatrimestre - 1ra Nota Parcial</option>
                <option value="2c_2np">2do Cuatrimestre - 2da Nota Parcial</option>
                <option value="2c_nota">2do Cuatrimestre - Nota</option>
                <option value="anual">Anual</option>
                <option value="dic">Recuperatorio - Diciembre</option>
                <option value="feb">Recuperatorio - Febrero</option>
                <option value="nota-final">Nota Final</option>
            </select>

            <button id="guardar-btn" onclick="guardarNotas()">Guardar</button>
        </form>
    </div>

    <footer>
        <div class="footer-content">
            <div class="informacion-escuela">
                <h3>Información de la Escuela</h3>
                <p>Email: info@colegioguevara.edu</p>
                <p>Teléfono: +54 123 456 789</p>
                <p><a href="https://www.facebook.com/colegioguevara" target="_blank">Facebook</a></p>
            </div>

            <div class="desarrollado">
                <p>Desarrollado por TechFix</p>
                <img src="/Imagenes/logo_techfix.PNG" alt="Logo TechFix" class="logo-techfix">
            </div>
        </div>
    </footer>

    <script>
        // Cargar las notas desde el localStorage al cargar la página
        window.onload = function() {
            cargarNotas();
        };
    
        function cambiarMateria() {
            const materia = document.getElementById('materia-select').value;
            document.getElementById('materia-nombre').innerText = materia.charAt(0).toUpperCase() + materia.slice(1);
    
            // Limpia las notas antes de cargar nuevas
            limpiarNotas();
            cargarNotas(); // Cargar las notas de la materia seleccionada
        }
    
        function limpiarNotas() {
            // Limpia los campos de notas
            const notaInputs = document.querySelectorAll('input[type="number"]');
            notaInputs.forEach(input => {
                input.value = ''; // Limpia los campos de notas
            });
        }
    
        function guardarNotas() {
            const materia = document.getElementById('materia-select').value;
            const rows = document.querySelectorAll('.notas table tr:not(.header-row)');
            const notas = {};
            let allFieldsValid = true;
    
            rows.forEach((row) => {
                const nombre = row.cells[0].innerText;
                const nota = Array.from(row.querySelectorAll('input')).map(input => {
                    if (input.value === "") {
                        allFieldsValid = false;
                    }
                    return input.value;
                });
                notas[nombre] = nota;
            });
    
            localStorage.setItem(materia, JSON.stringify(notas));
            alert('Notas guardadas exitosamente');
        }
    
        function cargarNotas() {
            const materia = document.getElementById('materia-select').value;
            const notasGuardadas = JSON.parse(localStorage.getItem(materia));
    
            if (notasGuardadas) {
                const rows = document.querySelectorAll('.notas table tr:not(.header-row)');
    
                rows.forEach((row) => {
                    const nombre = row.cells[0].innerText;
                    const notas = notasGuardadas[nombre] || [];
                    const inputs = row.querySelectorAll('input');
    
                    inputs.forEach((input, index) => {
                        input.value = notas[index] || ''; // Carga las notas guardadas o deja vacío
                    });
                });
            }
        }
    
        function toggleMenu(event) {
            event.stopPropagation(); // Evita que el clic en la imagen cierre el menú
            const dropdown = document.getElementById("dropdown-menu");
            dropdown.style.display = dropdown.style.display === "block" ? "none" : "block"; // Alterna el menú
        }

        window.addEventListener("click", function(event) {
            const dropdown = document.getElementById("dropdown-menu");
            if (!event.target.closest('.perfil')) {
                dropdown.style.display = "none";
            }
        });
    
        function logout() {
            alert("Cerrando sesión..."); // Aquí puedes agregar la lógica para cerrar sesión
            // Ejemplo: redirigir a la página de inicio
            window.location.href = 'index';
        }
    
        document.addEventListener('click', function(event) {
            const dropdownMenu = document.getElementById('dropdown-menu');
            if (!dropdownMenu.contains(event.target)) {
                dropdownMenu.classList.remove('show');
            }
        });
    </script>
    
</body>
</html>